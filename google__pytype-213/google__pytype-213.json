{
    "instance_id": "google__pytype-213",
    "patch": "diff --git a/pytype/tools/analyze_project/pytype_runner.py b/pytype/tools/analyze_project/pytype_runner.py\nindex 6812860f0..1c12b6e22 100644\n--- a/pytype/tools/analyze_project/pytype_runner.py\n+++ b/pytype/tools/analyze_project/pytype_runner.py\n@@ -196,9 +196,6 @@ def get_module_action(self, module):\n     else:\n       action = Action.INFER\n       report = logging.info\n-    if not f.endswith('.py'):\n-      report('skipped: non-Python file %s', f)\n-      return None\n     # For builtin and system files, do not attempt to generate a pyi.\n     if module.kind in ('Builtin', 'System'):\n       action = Action.GENERATE_DEFAULT\n",
    "repo": "google/pytype",
    "base_commit": "580c2d8333f290ea6b173842cb958a52b5fb1e17",
    "hints_text": "Thanks! It looks like pytype/tools/analyze_project/pytype_runner_test.py needs to be updated.\nActually, there's one more place in pytype that probably needs to be changed: https://github.com/google/pytype/blob/master/pytype/tools/analyze_project/main.py#L77. If `import_graph.unreadable files` is now going to include all files regardless of extension, then we shouldn't report an error unless an unreadable file is a Python file.\r\n\r\nI think something like the following would work:\r\n```\r\ntry:\r\n  ...\r\n  unreadable_inputs = conf.inputs & import_graph.unreadable_files\r\n  unreadable_python_inputs = {file for file in unreadable_inputs if file.endswith('.py')}\r\n      assert not unreadable_python_inputs, '\\n  '.join(\r\n          ['Unparseable in Python %s:' % conf.python_version] +\r\n        sorted(unreadable_python_inputs))\r\nexcept ...:\r\n  ...\r\nconf.inputs -= unreadable_inputs\r\n```\n@rchen152 Thanks for all your inputs, I guess it should work now.\nThanks for sending the additional PR. For this one, the failing test still needs to be updated. It looks like the broken test cases are TestYieldSortedModules.test_non_py_dep and TestGetModuleAction.test_skip in pytype/tools/analyze_project/pytype_runner_test.py. Since they're testing behavior that this change is removing, I think you can just delete them.\n@rchen152 I hope #207 will do it.\n@rchen152 I guess it will keep on failing until #207 is merged.\nCould you copy the changes from https://github.com/google/pytype/pull/207 into this PR instead? It's better to have the test removal done together with the motivating change; also, if they're submitted separately, I think you'd have to rebase this PR on top of the master branch.\n@rchen152 Sure, I will.\n@rchen152 It's done.\n@rchen152 Sure, Thanks!!",
    "created_at": "2018-12-18T21:05:02Z",
    "test_patch": "diff --git a/pytype/tools/analyze_project/pytype_runner_test.py b/pytype/tools/analyze_project/pytype_runner_test.py\nindex 11ae340da..bf4f254a8 100644\n--- a/pytype/tools/analyze_project/pytype_runner_test.py\n+++ b/pytype/tools/analyze_project/pytype_runner_test.py\n@@ -252,10 +252,6 @@ def test_generate_default(self):\n         runner.get_module_action(Module('', 'foo.py', 'foo', 'System')),\n         pytype_runner.Action.GENERATE_DEFAULT)\n \n-  def test_skip(self):\n-    runner = make_runner([], [], self.parser.config_from_defaults())\n-    self.assertIsNone(runner.get_module_action(Module('', 'foo.cc', 'foo')))\n-\n \n class TestYieldSortedModules(TestBase):\n   \"\"\"Tests for PytypeRunner.yield_sorted_modules().\"\"\"\n@@ -320,14 +316,6 @@ def test_cycle(self):\n          (dep, Action.INFER, (dep, src), Stage.SECOND_PASS),\n          (src, Action.CHECK, (dep, src), Stage.SECOND_PASS)])\n \n-  def test_non_py_dep(self):\n-    conf = self.parser.config_from_defaults()\n-    d = self.normalize('foo/')\n-    conf.pythonpath = [d]\n-    dep = Module(d, 'bar.so', 'bar')\n-    runner = make_runner([], [((dep,), ())], conf)\n-    self.assert_sorted_modules_equal(runner.yield_sorted_modules(), [])\n-\n   def test_system_dep(self):\n     conf = self.parser.config_from_defaults()\n     d = self.normalize('foo/')\n",
    "problem_statement": "Remove \".py\" report\nPart of #111 \n",
    "environment_setup_commit": "580c2d8333f290ea6b173842cb958a52b5fb1e17",
    "pr_url": "https://github.com/google/pytype/pull/213",
    "issue_url": "https://github.com/google/pytype/issues/204",
    "issue_numbers": [
        "204"
    ]
}